# MP4 è§†é¢‘æ‹¼æ¥å·¥å…· - æ‰“åŒ…è¯´æ˜

## âœ… macOS ç‰ˆæœ¬ï¼ˆå·²å®Œæˆï¼‰

### æ–‡ä»¶ä½ç½®
```
/Users/stread/Project/002_LrsTool/mp4handler/src-tauri/target/release/bundle/macos/
â”œâ”€â”€ mp4handler.app                    # macOS åº”ç”¨ï¼ˆåŒå‡»å³å¯è¿è¡Œï¼‰
â””â”€â”€ mp4handler-macos-portable.zip    # ä¾¿æºç‰ˆå‹ç¼©åŒ…
```

### ä½¿ç”¨æ–¹æ³•
1. è§£å‹ `mp4handler-macos-portable.zip`
2. åŒå‡» `mp4handler.app` å³å¯è¿è¡Œ
3. é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦åœ¨"ç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§"ä¸­å…è®¸è¿è¡Œ

### åº”ç”¨å¤§å°
- åº”ç”¨å¤§å°: 164 MBï¼ˆåŒ…å« FFmpeg å’Œ FFprobeï¼‰

---

## âš ï¸ Windows ç‰ˆæœ¬ï¼ˆéœ€è¦åœ¨ Windows ç³»ç»Ÿä¸Šæ‰“åŒ…ï¼‰

ç”±äºæˆ‘ä»¬åœ¨ macOS ç³»ç»Ÿä¸Š,æ— æ³•ç›´æ¥äº¤å‰ç¼–è¯‘ Windows ç‰ˆæœ¬ã€‚éœ€è¦åœ¨ Windows ç³»ç»Ÿä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

### æ–¹æ¡ˆ 1: åœ¨ Windows ç”µè„‘ä¸Šæ‰“åŒ…

#### å‰ç½®è¦æ±‚
1. å®‰è£… Node.js å’Œ Yarn
2. å®‰è£… Rust: https://rustup.rs/
3. å®‰è£… Visual Studio Build Toolsï¼ˆåŒ…å« C++ å·¥å…·ï¼‰

#### æ‰“åŒ…æ­¥éª¤
```bash
# 1. å°†é¡¹ç›®å¤åˆ¶åˆ° Windows ç”µè„‘
# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd mp4handler

# 3. å®‰è£…ä¾èµ–
yarn install

# 4. æ‰“åŒ…
yarn tauri build
```

#### è¾“å‡ºä½ç½®
```
src-tauri/target/release/bundle/nsis/mp4handler_0.1.0_x64-setup.exe  # å®‰è£…ç¨‹åº
```

### æ–¹æ¡ˆ 2: ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ‰“åŒ…

åˆ›å»º `.github/workflows/build.yml` æ–‡ä»¶,ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åœ¨ Windows å’Œ macOS ä¸Šæ‰“åŒ…:

```yaml
name: Build

on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    strategy:
      matrix:
        platform: [macos-latest, windows-latest]
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - uses: dtolnay/rust-toolchain@stable
      - run: yarn install
      - run: yarn tauri build
      - uses: actions/upload-artifact@v3
        with:
          name: ${{ matrix.platform }}-build
          path: src-tauri/target/release/bundle/
```

---

## ğŸ“¦ å·²å‡†å¤‡çš„æ–‡ä»¶

### Windows FFmpeg äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå·²å‡†å¤‡ï¼‰
```
src-tauri/binaries/
â”œâ”€â”€ ffmpeg-x86_64-pc-windows-msvc.exe   # Windows FFmpeg
â”œâ”€â”€ ffprobe-x86_64-pc-windows-msvc.exe  # Windows FFprobe
â”œâ”€â”€ ffmpeg-aarch64-apple-darwin         # macOS FFmpeg (Apple Silicon)
â””â”€â”€ ffprobe-aarch64-apple-darwin        # macOS FFprobe (Apple Silicon)
```

æ‰€æœ‰å¿…è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½å·²å‡†å¤‡å¥½,åªéœ€è¦åœ¨ Windows ç³»ç»Ÿä¸Šè¿è¡Œ `yarn tauri build` å³å¯ã€‚

---

## ğŸ¯ ä¾¿æºç‰ˆè¯´æ˜

### macOS
- `.app` æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¾¿æºç‰ˆ,å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°ä»»ä½•ä½ç½®è¿è¡Œ
- ä¸éœ€è¦å®‰è£…,åŒå‡»å³å¯ä½¿ç”¨

### Windowsï¼ˆæ‰“åŒ…åï¼‰
- NSIS å®‰è£…ç¨‹åºä¼šå®‰è£…åˆ°ç”¨æˆ·ç›®å½•
- å¦‚éœ€çœŸæ­£çš„ä¾¿æºç‰ˆ,å¯ä»¥è€ƒè™‘ä½¿ç”¨ `portable` targetï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä»£ç ç­¾å**:
   - macOS å’Œ Windows åº”ç”¨æœªç­¾å,é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨å…è®¸
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®è´­ä¹°ä»£ç ç­¾åè¯ä¹¦

2. **åº”ç”¨å¤§å°**:
   - ç”±äºå†…ç½®äº† FFmpeg,åº”ç”¨ä½“ç§¯è¾ƒå¤§ï¼ˆçº¦ 160-200 MBï¼‰
   - è¿™æ˜¯æ­£å¸¸çš„,å› ä¸º FFmpeg æ˜¯å®Œæ•´çš„è§†é¢‘å¤„ç†å·¥å…·

3. **ç³»ç»Ÿè¦æ±‚**:
   - macOS: 10.13 æˆ–æ›´é«˜ç‰ˆæœ¬
   - Windows: Windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### macOS
```bash
# ç›´æ¥è¿è¡Œåº”ç”¨
open /Users/stread/Project/002_LrsTool/mp4handler/src-tauri/target/release/bundle/macos/mp4handler.app
```

### Windowsï¼ˆåœ¨ Windows ç³»ç»Ÿä¸Šï¼‰
```bash
# æ‰“åŒ…åè¿è¡Œå®‰è£…ç¨‹åº
.\src-tauri\target\release\bundle\nsis\mp4handler_0.1.0_x64-setup.exe
```
